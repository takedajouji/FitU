<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FitU - Fitness Tracker</title>
    <link rel="stylesheet" href="styles.css">
    
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1>🏋️ FitU</h1>
                <p>Your Personal Fitness Tracker</p>
                <div id="auth-status" class="auth-status">
                    <span id="user-info">Not logged in</span>
                    <button id="auth-button" class="btn btn-primary">Login</button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content" id="main-content" style="display: none;">
            
            <!-- Dashboard Overview -->
            <section class="dashboard-section">
                <h2>📊 Today's Summary</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Net Calories</h3>
                        <span id="net-calories" class="stat-value">-</span>
                    </div>
                    <div class="stat-card">
                        <h3>Food Logged</h3>
                        <span id="food-calories" class="stat-value">-</span>
                    </div>
                    <div class="stat-card">
                        <h3>Exercise Done</h3>
                        <span id="exercise-calories" class="stat-value">-</span>
                    </div>
                    <div class="stat-card">
                        <h3>Goal Status</h3>
                        <span id="goal-status" class="stat-value">-</span>
                    </div>
                </div>
                <button id="refresh-dashboard" class="btn btn-secondary">🔄 Refresh</button>
            </section>

            <!-- Food Logging Section -->
            <section class="feature-section">
                <h2>🍎 Log Food</h2>
                <div class="form-group">
                    <form id="food-form" class="input-form">
                        <div class="form-row">
                            <input type="text" id="food-name" placeholder="Food name (e.g., Apple)" required>
                            <input type="number" id="food-calories" placeholder="Calories per serving" required>
                        </div>
                        <div class="form-row">
                            <input type="number" id="food-servings" placeholder="Servings" step="0.1" value="1" required>
                            <select id="meal-type" required>
                                <option value="">Select meal</option>
                                <option value="breakfast">Breakfast</option>
                                <option value="lunch">Lunch</option>
                                <option value="dinner">Dinner</option>
                                <option value="snack">Snack</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <input type="number" id="food-protein" placeholder="Protein (g)" step="0.1">
                            <input type="number" id="food-carbs" placeholder="Carbs (g)" step="0.1">
                            <input type="number" id="food-fat" placeholder="Fat (g)" step="0.1">
                        </div>
                        <button type="submit" class="btn btn-primary">Log Food</button>
                    </form>
                </div>
                
                <div class="results-section">
                    <h3>Today's Food Entries</h3>
                    <div id="food-entries" class="entries-list">
                        <p class="loading">Click refresh to load entries...</p>
                    </div>
                    <button id="refresh-food" class="btn btn-secondary">🔄 Refresh Food Entries</button>
                </div>
            </section>

            <!-- Exercise Logging Section -->
            <section class="feature-section">
                <h2>💪 Log Exercise</h2>
                <div class="form-group">
                    <form id="exercise-form" class="input-form">
                        <div class="form-row">
                            <select id="exercise-select" required>
                                <option value="">Select exercise</option>
                                <!-- Will be populated dynamically -->
                            </select>
                            <input type="number" id="exercise-duration" placeholder="Duration (minutes)" required>
                        </div>
                        <div class="form-row">
                            <input type="number" id="exercise-sets" placeholder="Sets (optional)">
                            <input type="number" id="exercise-reps" placeholder="Reps (optional)">
                            <input type="number" id="exercise-weight" placeholder="Weight (kg)" step="0.1">
                        </div>
                        <div class="form-row">
                            <input type="number" id="manual-calories" placeholder="Manual calories (optional)">
                            <input type="text" id="exercise-notes" placeholder="Notes (optional)">
                        </div>
                        <button type="submit" class="btn btn-primary">Log Exercise</button>
                    </form>
                </div>
                
                <div class="results-section">
                    <h3>Today's Exercise Logs</h3>
                    <div id="exercise-entries" class="entries-list">
                        <p class="loading">Click refresh to load entries...</p>
                    </div>
                    <button id="refresh-exercises" class="btn btn-secondary">🔄 Refresh Exercise Logs</button>
                </div>
            </section>

            <!-- Calorie Balance Section -->
            <section class="feature-section">
                <h2>⚖️ Calorie Balance</h2>
                <div class="balance-controls">
                    <button id="get-daily-balance" class="btn btn-primary">📅 Today's Balance</button>
                    <button id="get-weekly-balance" class="btn btn-primary">📈 Weekly Trend</button>
                    <button id="get-balance-summary" class="btn btn-primary">📋 Summary</button>
                </div>
                
                <div id="balance-results" class="results-section">
                    <p class="loading">Click a button above to view calorie balance data...</p>
                </div>
            </section>

            <!-- AI Recommendations Section -->
            <section class="feature-section">
                <h2>🤖 AI Recommendations</h2>
                <div class="ai-controls">
                    <div class="form-row">
                        <select id="fitness-goal" class="ai-input">
                            <option value="lose_weight">Lose Weight</option>
                            <option value="build_muscle">Build Muscle</option>
                            <option value="improve_fitness">Improve Fitness</option>
                            <option value="maintain_weight">Maintain Weight</option>
                        </select>
                        <select id="workout-duration" class="ai-input">
                            <option value="15">15 minutes</option>
                            <option value="30">30 minutes</option>
                            <option value="45">45 minutes</option>
                            <option value="60">60 minutes</option>
                        </select>
                    </div>
                    <div class="ai-buttons">
                        <button id="get-personalized" class="btn btn-primary">🎯 Personalized Workout</button>
                        <button id="get-quick-workout" class="btn btn-primary">⚡ Quick Workout</button>
                        <button id="get-progressive-plan" class="btn btn-primary">📈 Progressive Plan</button>
                    </div>
                </div>
                
                <div id="ai-results" class="results-section">
                    <p class="loading">Click a button above to get AI recommendations...</p>
                </div>
            </section>

            <!-- API Testing Section -->
            <section class="feature-section">
                <h2>🔧 System Status</h2>
                <div class="system-controls">
                    <button id="test-health" class="btn btn-secondary">🏥 Health Check</button>
                    <button id="test-connection" class="btn btn-secondary">🔗 Test Auth</button>
                </div>
                
                <div id="system-results" class="results-section">
                    <p class="loading">Click buttons above to test system status...</p>
                </div>
            </section>

        </main>

        <!-- Login Screen -->
        <div id="login-screen" class="login-screen">
            <div class="login-card">
                <h2>🔐 Login to FitU</h2>
                <p>Sign in to access your fitness tracker</p>
                
                <div class="login-options">
                    <button id="google-login" class="btn btn-google">
                        <span>🔍</span> Sign in with Google
                    </button>
                    
                    <div class="divider">
                        <span>or</span>
                    </div>
                    
                    <form id="email-login-form">
                        <input type="email" id="login-email" placeholder="Email" required>
                        <input type="password" id="login-password" placeholder="Password" required>
                        <button type="submit" class="btn btn-primary">Sign In</button>
                    </form>
                    
                    <div class="auth-links">
                        <a href="#" id="show-signup">Don't have an account? Sign up</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div id="loading-overlay" class="loading-overlay" style="display: none;">
            <div class="loading-spinner">
                <div class="spinner"></div>
                <p>Loading...</p>
            </div>
        </div>

        <!-- Error/Success Messages -->
        <div id="message-container" class="message-container"></div>
    </div>

    <!-- JavaScript -->
    <script src="firebase-config.js"></script>
    <script src="api-client.js"></script>
    <script src="ui-handlers.js"></script>
    <script src="app.js"></script>
</body>
</html>
